{
    "projectName": "typingrealm",
    "infrastructureDataFolder": "./infrastructure-data",
    "caddyfile": "./reverse-proxy/Caddyfile.host",
    "infraTypes": [
        {
            "type": "postgres",
            "volume": "/var/lib/postgresql/data",
            "environment": [
                "POSTGRES_PASSWORD=admin"
            ]
        },
        {
            "type": "redis",
            "volume": "/data"
        }
    ],
    "envs": [
        {
            "name": "local",
            "useInfrastructureFrom": "dev",
            "exposeLocalPorts": "true",
            "localVolume": "true"
        },
        {
            "name": "dev",
            "isLoadBalanced": "true",
            "exposeInfraPorts": "true",
            "infraPortPrefix": "2"
        },
        {
            "name": "production",
            "isLoadBalanced": "true",
            "noPrefix": "true",
            "exposeInfraPorts": "true",
            "infraPortPrefix": "1"
        }
    ],
    "services": [
        {
            "name": "typing",
            "isLoadBalanced": true,
            "dockerContext": "./backend",
            "infra": [
                {
                    "type": "postgres",
                    "ports": "5432:5432"
                },
                {
                    "type": "redis",
                    "ports": "6379:6379"
                }
            ],
            "backends": [
                {
                    "servicePath": "node",
                    "dockerFilePath": "typing/node",
                    "localPort": 30101,
                    "localVolumes": [
                        "./backend/framework/node:/usr/src/app/framework/node",
                        "./backend/typing/node:/usr/src/app/typing/node"
                    ],
                    "replicas": 3
                }
            ]
        },
        {
            "name": "texts",
            "isLoadBalanced": true,
            "dockerContext": "./backend",
            "infra": [],
            "backends": [
                {
                    "servicePath": "node",
                    "dockerFilePath": "texts/node",
                    "localPort": 30102,
                    "localVolumes": [
                        "./backend/framework/node:/usr/src/app/framework/node",
                        "./backend/texts/node:/usr/src/app/texts/node"
                    ],
                    "replicas": 3
                }
            ]
        },
        {
            "name": "ui",
            "dockerContext": "./frontend",
            "backends": [
                {
                    "localPort": 30080,
                    "localVolumes": [
                        "./frontend:/usr/share/nginx/html"
                    ]
                }
            ]
        }
    ]
}